<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>SAS // LOGISTIQUE</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Tableaux style terminal */
        .log-table { width: 100%; border-collapse: collapse; margin-top: 20px; font-family: 'Courier New', monospace; }
        .log-table th { text-align: left; border-bottom: 2px solid #369; padding: 10px; color: #369; }
        .log-table td { padding: 8px; border-bottom: 1px solid #112; color: #ccc; }
        .log-table tr:hover { background: rgba(51, 102, 153, 0.1); }

        /* Badges de statut */
        .badge { padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; }
        .badge-stock { background: #1a4a1a; color: #4f4; border: 1px solid #4f4; } /* Vert */
        .badge-issued { background: #4a3a1a; color: #fb0; border: 1px solid #fb0; } /* Orange */
        
        /* Contrôles */
        .controls { display: flex; gap: 10px; margin-bottom: 20px; background: rgba(0,0,0,0.5); padding: 15px; border: 1px solid #333; }
        .search-bar { flex-grow: 1; background: transparent; border: 1px solid #369; color: white; padding: 8px; }
        
        .action-btn { cursor: pointer; background: #369; color: white; border: none; padding: 5px 10px; }
        .action-btn:hover { background: #47a; }
    </style>
</head>
<body>
    <div class="scanlines"></div>
    <div class="main-container">
        <h1 style="border-bottom: 2px solid #369; padding-bottom: 10px;">REGISTRE MATÉRIEL</h1>

        <div class="controls">
            <input type="text" id="search-input" class="search-bar" placeholder="Rechercher (Série, Nom, Agent...)" onkeyup="loadData()">
            <button onclick="openModal('create')" class="btn-main">⊕ NOUVEL OBJET</button>
        </div>

        <table class="log-table">
            <thead>
                <tr>
                    <th>SÉRIE (S/N)</th>
                    <th>OBJET</th>
                    <th>LOCALISATION / DÉTENTEUR</th>
                    <th>STATUT</th>
                    <th>ACTIONS</th>
                </tr>
            </thead>
            <tbody id="table-body">
                </tbody>
        </table>
    </div>

    <div id="modal-create" class="modal-overlay hidden">
        <div class="modal-box">
            <h2>ENREGISTRER MATÉRIEL</h2>
            <input id="new-sn" placeholder="N° DE SÉRIE (ex: GLK-001)">
            <input id="new-name" placeholder="NOM (ex: Glock 17)">
            <select id="new-cat">
                <option value="ARME">ARME</option>
                <option value="RADIO">RADIO</option>
                <option value="VEHICULE">VÉHICULE</option>
                <option value="DIVERS">DIVERS</option>
            </select>
            <input id="new-loc" placeholder="LIEU STOCKAGE (ex: Armurerie A)">
            <div class="modal-actions">
                <button onclick="createItem()">VALIDER</button>
                <button onclick="closeModals()" class="btn-cancel">ANNULER</button>
            </div>
        </div>
    </div>

    <div id="modal-assign" class="modal-overlay hidden">
        <div class="modal-box">
            <h2>SORTIE DE STOCK</h2>
            <p id="assign-item-name" style="color:#369; font-weight:bold;"></p>
            <input type="hidden" id="assign-id">
            <input id="assign-agent" placeholder="NOM DE L'AGENT (ex: Graves)">
            <div class="modal-actions">
                <button onclick="confirmAssign()">CONFIRMER LA REMISE</button>
                <button onclick="closeModals()" class="btn-cancel">ANNULER</button>
            </div>
        </div>
    </div>

    <div id="modal-return" class="modal-overlay hidden">
        <div class="modal-box">
            <h2>RETOUR EN STOCK</h2>
            <p>Où range-t-on cet objet ?</p>
            <input type="hidden" id="return-id">
            <input id="return-loc" placeholder="LIEU (ex: Armurerie, Coffre 3...)">
            <div class="modal-actions">
                <button onclick="confirmReturn()">RANGEMENT</button>
                <button onclick="closeModals()" class="btn-cancel">ANNULER</button>
            </div>
        </div>
    </div>

    <script src="js/equipment.js"></script>
</body>
</html>