<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAS - Command Hierarchy</title>
    
    <script>
        const session = localStorage.getItem('sas_session');
        // Redirection de sécurité (optionnel)
        // if (!session) window.location.href = 'index.html';
    </script>

    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style-mo.css">

    <style>
        /* --- SURCHARGES ET NOUVEAUX STYLES --- */
        body {
            background-color: #050505;
            background-image: 
                linear-gradient(rgba(0, 255, 157, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 157, 0.03) 1px, transparent 1px),
                radial-gradient(circle at 50% 0%, #1a2530 0%, #050505 80%);
            background-size: 40px 40px, 40px 40px, 100% 100%;
            overflow-x: hidden;
            overflow-y: auto;
            min-height: 100vh;
        }

        .hierarchy-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 80px 20px 150px 20px;
            position: relative;
            z-index: 5;
            min-width: 1200px;
            transform-origin: top center;
            animation: interfaceFadeIn 1s ease-out;
        }

        @keyframes interfaceFadeIn {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* --- CARTES AGENTS (STYLE HOLO) --- */
        .node-card {
            background: rgba(13, 17, 23, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            padding: 20px;
            width: 260px;
            text-align: left;
            position: relative;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            /* Forme technologique asymétrique */
            clip-path: polygon(
                20px 0, 100% 0, 
                100% calc(100% - 20px), calc(100% - 20px) 100%, 
                0 100%, 0 20px
            );
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-decoration: none; /* Pour les liens */
            display: block;
        }

        /* Effet de survol puissant */
        .node-card:hover {
            transform: translateY(-8px) scale(1.02);
            background: rgba(20, 30, 40, 0.9);
            z-index: 50;
        }
        
        /* Petit accent lumineux dans le coin */
        .node-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 15px; height: 15px;
            border-top: 2px solid rgba(255,255,255,0.3); border-left: 2px solid rgba(255,255,255,0.3);
            transition: 0.3s;
        }
        .node-card:hover::before { width: 100%; height: 100%; opacity: 0.1; background: currentColor; border: none; }

        /* TYPOGRAPHIE */
        .node-role {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 2px;
            color: #8899aa;
            margin-bottom: 5px;
            text-transform: uppercase;
            display: flex; align-items: center; gap: 8px;
        }
        .node-role::before { content: ''; width: 6px; height: 6px; background: currentColor; box-shadow: 0 0 5px currentColor; }
        
        .node-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 800;
            color: #fff;
            margin: 5px 0 15px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(0,0,0,0.8);
        }

        .node-status {
            font-size: 0.65rem;
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0,0,0,0.3);
            padding: 8px 10px;
            border-radius: 2px;
            display: flex; justify-content: space-between; align-items: center;
            border-left: 2px solid currentColor;
        }

        /* --- COULEURS ET RANGS (Variables CSS simulées) --- */
        /* COMMANDER (Gold) */
        .rank-director { border-color: #d4af37; color: #d4af37; width: 320px; }
        .rank-director .node-name { color: #fff; font-size: 1.4rem; }
        .rank-director:hover { box-shadow: 0 0 40px rgba(212, 175, 55, 0.15); border-color: #ffe680; }

        /* OPS (Red) */
        .rank-ops { border-color: #ff3333; color: #ff3333; }
        .rank-ops:hover { box-shadow: 0 0 30px rgba(255, 51, 51, 0.2); }

        /* STRAT (Yellow) */
        .rank-strat { border-color: #eebb00; color: #eebb00; }
        .rank-strat:hover { box-shadow: 0 0 30px rgba(238, 187, 0, 0.2); }

        /* INTEL (Cyan) */
        .rank-intel { border-color: #00f3ff; color: #00f3ff; }
        .rank-intel:hover { box-shadow: 0 0 30px rgba(0, 243, 255, 0.2); }

        /* SOLDAT (Dim -> Highlight) */
        .rank-soldier { border-color: #445566; color: #8899aa; width: 220px; opacity: 0.9; }
        .rank-soldier:hover { opacity: 1; border-color: #fff; }
        .rank-soldier .node-name { font-size: 1rem; }
        
        /* Couleur spécifique au survol pour les soldats selon leur groupe */
        .group-ops .rank-soldier:hover { border-color: #ff3333; color: #ff3333; box-shadow: 0 5px 20px rgba(255,51,51,0.1); }
        .group-intel .rank-soldier:hover { border-color: #00f3ff; color: #00f3ff; box-shadow: 0 5px 20px rgba(0,243,255,0.1); }
        .group-strat .rank-soldier:hover { border-color: #eebb00; color: #eebb00; box-shadow: 0 5px 20px rgba(238,187,0,0.1); }

        /* --- CONNECTEURS (Data Flow) --- */
        .connection-line {
            position: absolute;
            z-index: -1;
            background: #2a3b4c;
            overflow: hidden;
        }
        /* Animation du flux de données dans les lignes */
        .connection-line::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: translateX(-100%);
            animation: dataFlow 3s infinite linear;
        }
        @keyframes dataFlow { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        .vertical-line { width: 1px; }
        .vertical-line::after { background: linear-gradient(180deg, transparent, rgba(255,255,255,0.5), transparent); animation: dataFlowVertical 3s infinite linear; }
        @keyframes dataFlowVertical { 0% { transform: translateY(-100%); } 100% { transform: translateY(100%); } }

        .horizontal-line { height: 1px; }

        /* --- STRUCTURE DE LA GRILLE --- */
        .level-1 { margin-bottom: 60px; position: relative; }
        
        .level-2-container {
            display: flex; justify-content: center; gap: 150px;
            position: relative; margin-bottom: 60px;
        }

        .level-3-container {
            display: flex; justify-content: center; gap: 40px;
            align-items: flex-start; flex-wrap: wrap;
            max-width: 1400px;
        }

        /* --- PLACEMENT SPÉCIFIQUE DES LIGNES --- */
        /* Ligne Centrale Directeur -> Split */
        .line-main-stem {
            height: 40px; left: 50%; bottom: -40px; position: absolute; background: #d4af37; width: 1px;
        }
        /* Pont horizontal pour les lieutenants */
        .line-bridge {
            position: absolute; top: -20px; left: 180px; right: 180px;
            background: linear-gradient(90deg, #ff3333, #d4af37, #00f3ff);
            height: 1px; opacity: 0.6;
        }
        /* Connecteurs verticaux vers les lieutenants */
        .line-connect-left { position: absolute; top: -20px; left: 180px; height: 20px; background: #ff3333; width: 1px; }
        .line-connect-center { position: absolute; top: -20px; left: 50%; height: 20px; background: #d4af37; width: 1px; }
        .line-connect-right { position: absolute; top: -20px; right: 180px; height: 20px; background: #00f3ff; width: 1px; }

        /* Lignes vers les soldats (depuis le bas des lieutenants) */
        /* Ces lignes sont gérées par des pseudo-éléments sur les conteneurs de groupe */
        
        .group-column {
            display: flex; flex-direction: column; gap: 20px; align-items: center; position: relative;
        }
        .group-column::before {
            content: ''; position: absolute; top: -40px; left: 50%; width: 1px; height: 40px;
            z-index: -1; opacity: 0.3;
        }
        .group-ops::before { background: #ff3333; }
        .group-intel::before { background: #00f3ff; }
        .group-strat::before { background: #eebb00; }

        /* HUD UTILISATEUR */
        .user-hud {
            position: fixed; top: 20px; right: 30px;
            background: rgba(10, 15, 20, 0.8);
            border: 1px solid rgba(255,255,255,0.1);
            border-right: 3px solid var(--primary);
            padding: 8px 15px;
            font-family: 'Share Tech Mono', monospace; font-size: 0.8rem; color: #fff;
            z-index: 10000; backdrop-filter: blur(5px);
            display: flex; gap: 15px; align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .hud-label { color: #556677; font-size: 0.7rem; }
        .hud-val { color: var(--primary); letter-spacing: 1px; }

        /* RESPONSIVE */
        @media (max-width: 1200px) {
            .hierarchy-wrapper { transform: scale(0.7); transform-origin: top center; min-width: auto; width: 100%; }
            .line-bridge { left: 130px; right: 130px; }
            .line-connect-left { left: 130px; }
            .line-connect-right { right: 130px; }
        }
    </style>
</head>
<body>

    <div class="crt-overlay"></div>

    <div id="user-hud" class="user-hud" style="display: none;">
        <div>
            <span class="hud-label">OPERATOR</span><br>
            <span id="hud-username" class="hud-val">UNKNOWN</span>
        </div>
        <div>
            <span class="hud-label">CLEARANCE</span><br>
            <span id="hud-rank" class="hud-val" style="color:var(--secondary)">LVL-0</span>
        </div>
    </div>

    <div class="hierarchy-wrapper">

        <div class="level-1">
            <a href="db/agent-Graves.html" class="node-card rank-director">
                <div class="node-role">COMMANDER // CEO</div>
                <div class="node-name">PHILLIP GRAVES</div>
                <div class="node-status" style="border-color: #d4af37;">
                    <span>STATUS: ACTIVE</span>
                    <span style="color:#d4af37; font-weight:bold;">[MASTER FILE]</span>
                </div>
            </a>
            
            <div class="connection-line vertical-line line-main-stem"></div>
        </div>


        <div class="level-2-container">
            
            <div class="connection-line horizontal-line line-bridge"></div>
            <div class="connection-line vertical-line line-connect-left"></div>
            <div class="connection-line vertical-line line-connect-center"></div>
            <div class="connection-line vertical-line line-connect-right"></div>

            <a href="db/agent-Javier.html" class="node-card rank-ops">
                <div class="node-role">OPS // RIGHT HAND</div>
                <div class="node-name">JAVIER</div>
                <div class="node-status" style="border-color: #ff3333;">
                    <span>UNIT: OPS</span>
                    <span style="color:#ff3333">● ONLINE</span>
                </div>
            </a>

            <a href="db/agent-ji.html" class="node-card rank-intel">
                <div class="node-role">INTEL // LEFT HAND</div>
                <div class="node-name">JACKAL</div>
                <div class="node-status" style="border-color: #00f3ff;">
                    <span>UNIT: INTEL</span>
                    <span style="color:#00f3ff">● ONLINE</span>
                </div>
            </a>

        </div>


        <div class="level-3-container">

            <div class="group-column group-ops">
                <a href="db/agent-blitz.html" class="node-card rank-soldier">
                    <div class="node-role">ASSAULT</div>
                    <div class="node-name">BLITZ</div>
                    <div class="node-status"><span>READY</span> <span style="color:#ff3333">●</span></div>
                </a>
                
                <a href="db/agent-blake.html" class="node-card rank-soldier">
                    <div class="node-role">INFANTRY</div>
                    <div class="node-name">BLAKE</div>
                    <div class="node-status"><span>DEPLOYED</span> <span style="color:#ff3333">●</span></div>
                </a>

                <a href="db/agent-roxanne.html" class="node-card rank-soldier">
                    <div class="node-role">PROTECTION</div>
                    <div class="node-name">ROXANNE</div>
                    <div class="node-status"><span>GUARD</span> <span style="color:#eebb00">●</span></div>
                </a>
            </div>

            <div class="group-column group-strat" style="margin-top: 40px;"> <a href="db/agent-selena.html" class="node-card rank-soldier" style="border-color: #eebb00;">
                    <div class="node-role" style="color:#eebb00">LEGAL // STRAT</div>
                    <div class="node-name">SELENA</div>
                    <div class="node-status"><span>ADVISOR</span> <span style="color:#eebb00">●</span></div>
                </a>

                <a href="db/agent-adam.html" class="node-card rank-soldier">
                    <div class="node-role">CONTRACTOR</div>
                    <div class="node-name">ADAM</div>
                    <div class="node-status"><span>PENDING</span> <span style="color:#666">●</span></div>
                </a>
            </div>

            <div class="group-column group-intel">
                <a href="db/agent-wei.html" class="node-card rank-soldier">
                    <div class="node-role">RECON</div>
                    <div class="node-name">DUST</div>
                    <div class="node-status"><span>OBSERVER</span> <span style="color:#00f3ff">●</span></div>
                </a>

                <a href="db/agent-nyx.html" class="node-card rank-soldier">
                    <div class="node-role">CYBERWARFARE</div>
                    <div class="node-name">NYX</div>
                    <div class="node-status"><span>NETRUNNER</span> <span style="color:#00ff9d">●</span></div>
                </a>
            </div>

        </div>

        <div style="margin-top: 80px; color: #445566; font-size: 0.7rem; font-family: 'Share Tech Mono'; letter-spacing: 3px;">
            SHADOW COMPANY NETWORK ARCHITECTURE V.4.0.2
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sessionRaw = localStorage.getItem('sas_session');
            if (sessionRaw) {
                try {
                    const currentUser = JSON.parse(sessionRaw);
                    document.getElementById('hud-username').textContent = currentUser.username;
                    document.getElementById('hud-rank').textContent = 'LVL ' + currentUser.rank;
                    document.getElementById('user-hud').style.display = 'flex';
                } catch(e) {}
            }
        });
    </script>
</body>
</html>