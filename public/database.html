<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAS - Command Hierarchy</title>
    
    <script>
        const session = localStorage.getItem('sas_session');
        if (!session) {
            // Décommenter pour forcer la connexion
            // window.location.href = 'index.html';
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style-mo.css">

    <style>
        body {
            overflow-y: auto;
            display: block;
            padding-top: 40px;
            background-image: 
                radial-gradient(circle at 50% 20%, rgba(20, 30, 40, 1) 0%, rgba(5, 5, 5, 1) 80%);
        }

        .hierarchy-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: 100px;
            position: relative;
            z-index: 5;
            min-width: 1200px; /* Assure que l'arbre ne s'écrase pas */
        }

        /* --- CARTES ET NOEUDS --- */
        .node-card {
            background: rgba(10, 15, 20, 0.9);
            border: 1px solid var(--dim);
            padding: 15px;
            width: 240px;
            text-align: center;
            position: relative;
            backdrop-filter: blur(5px);
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            cursor: pointer;
            /* Forme tech avec coins coupés */
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .node-card:hover {
            transform: scale(1.05) translateY(-5px);
            background: rgba(20, 30, 40, 0.95);
            z-index: 10;
        }

        .node-name {
            font-family: var(--font-code);
            font-size: 1.1rem;
            font-weight: 800;
            color: #fff;
            margin: 5px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .node-role {
            font-size: 0.7rem;
            letter-spacing: 2px;
            margin-bottom: 5px;
            font-weight: bold;
            opacity: 0.8;
        }
        .node-status {
            font-size: 0.65rem;
            color: var(--dim);
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 8px;
            padding-top: 5px;
            display: flex;
            justify-content: space-between;
        }

        /* --- COULEURS SPÉCIFIQUES --- */
        /* COMMAND (Gold) */
        .rank-director { border-color: var(--gold); width: 280px; }
        .rank-director .role { color: var(--gold); }
        .rank-director:hover { box-shadow: 0 0 30px rgba(212, 175, 55, 0.2); border-color: #ffe680; }

        /* OPS (Red - Javier) */
        .rank-ops { border-color: var(--danger); }
        .rank-ops .node-role { color: var(--danger); }
        .rank-ops:hover { box-shadow: 0 0 20px rgba(255, 51, 51, 0.3); border-color: #ff5555; }

        /* STRAT (Yellow - Selena) */
        .rank-strat { border-color: var(--warning); }
        .rank-strat .node-role { color: var(--warning); }
        .rank-strat:hover { box-shadow: 0 0 20px rgba(238, 187, 0, 0.3); border-color: #ffeeb0; }

        /* INTEL (Cyan - Jackal) */
        .rank-intel { border-color: var(--secondary); }
        .rank-intel .node-role { color: var(--secondary); }
        .rank-intel:hover { box-shadow: 0 0 20px rgba(0, 243, 255, 0.3); border-color: #aaffff; }

        /* SOLDATS (Dim -> Hover Color) */
        .rank-soldier { border-color: var(--dim); width: 200px; }
        .rank-soldier .node-role { color: #888; }
        
        .group-ops:hover .rank-soldier { border-color: var(--danger); }
        .group-strat:hover .rank-soldier { border-color: var(--warning); }
        .group-intel:hover .rank-soldier { border-color: var(--secondary); }

        /* --- STRUCTURE DE LIGNES (CONNECTIONS) --- */
        .level-1 { margin-bottom: 50px; position: relative; }
        .director-stem {
            width: 2px; height: 50px; background: var(--gold);
            margin: 0 auto; position: absolute; bottom: -50px; left: 50%;
            box-shadow: 0 0 10px var(--gold);
        }

        .level-2-wrapper {
            display: flex;
            justify-content: center;
            gap: 100px; /* Espace entre les Lieutenants */
            position: relative;
            margin-bottom: 50px;
        }

        /* La grande ligne horizontale qui relie les LTs */
        .bridge-horizontal {
            position: absolute;
            top: -20px;
            left: 120px; /* Ajusté pour centrer sur les cartes latérales */
            right: 120px;
            height: 2px;
            background: linear-gradient(90deg, var(--danger), var(--gold), var(--secondary));
            opacity: 0.7;
        }
        /* Connecteurs verticaux vers les LTs */
        .bridge-connector {
            position: absolute; top: -20px; width: 2px; height: 20px;
        }
        .bc-left { left: 120px; background: var(--danger); }
        .bc-center { left: 50%; background: var(--gold); }
        .bc-right { right: 120px; background: var(--secondary); }

        /* --- SOUS-GROUPES (LEVEL 3) --- */
        .level-3-wrapper {
            display: flex;
            justify-content: center;
            gap: 100px; /* Doit correspondre au gap du level 2 pour l'alignement */
            align-items: flex-start;
        }

        .unit-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px; /* Espace vertical entre les soldats */
            position: relative;
            width: 240px; /* Largeur pour matcher la carte du dessus */
        }

        /* Ligne verticale reliant le LT à ses soldats */
        .unit-stem {
            position: absolute;
            top: -50px; /* Remonte vers le LT */
            left: 50%;
            width: 2px;
            height: 100%; /* Descend tout le long de la colonne */
            z-index: -1;
            opacity: 0.3;
        }
        .stem-ops { background: var(--danger); }
        .stem-strat { background: var(--warning); }
        .stem-intel { background: var(--secondary); }

        /* HUD */
        .user-hud {
            position: fixed; top: 20px; right: 30px;
            background: rgba(10, 15, 20, 0.9);
            border: 1px solid var(--dim); border-left: 3px solid var(--primary);
            padding: 8px 15px; font-family: var(--font-ui); font-size: 0.85rem; color: #fff;
            z-index: 10000; backdrop-filter: blur(5px); display: flex; gap: 10px; align-items: center;
        }

        @media (max-width: 1200px) {
            .hierarchy-wrapper { transform: scale(0.8); transform-origin: top center; }
        }
    </style>
</head>
<body>

    <div class="crt-overlay"></div>

    <div id="user-hud" class="user-hud" style="display: none;">
        <div><span style="color:var(--dim)">OP:</span> <span id="hud-username" style="color:var(--primary); font-weight:bold">...</span></div>
        <div style="color:var(--dim)">|</div>
        <div><span style="color:var(--dim)">LVL:</span> <span id="hud-rank" style="color:var(--secondary)">...</span></div>
    </div>

    <div class="hierarchy-wrapper">


<!-- LEVEL 1 : COMMANDER -->
<div class="level-1">
<div class="node-card rank-director" onclick="window.location.href='db/agent-Graves.html'">
<div class="node-role">COMMANDER // CEO</div>
<div class="node-name">PHILLIP GRAVES</div>
<div class="node-status" style="color: var(--success);">
<span>STATUS: ACTIVE</span>
<span style="color:var(--gold)">[ DOSSIER MAÎTRE ]</span>
</div>
</div>
<div class="director-stem"></div>
</div>


<!-- LEVEL 2 : LIEUTENANTS (Only Javier & Jackal) -->
<div class="level-2-wrapper">


<div class="bridge-horizontal"></div>
<div class="bridge-connector bc-left"></div>
<div class="bridge-connector bc-right"></div>


<div class="node-card rank-ops" onclick="window.location.href='db/agent-Javier.html'">
<div class="node-role">OPS // RIGHT HAND</div>
<div class="node-name">JAVIER</div>
<div class="node-status">
<span>UNIT: OPS</span>
<span style="color:var(--danger)">ONLINE</span>
</div>
</div>


<div class="node-card rank-intel" onclick="window.location.href='db/agent-ji.html'">
<div class="node-role">INTEL // LEFT HAND</div>
<div class="node-name">JACKAL</div>
<div class="node-status">
<span>UNIT: INTEL</span>
<span style="color:var(--secondary)">ONLINE</span>
</div>
</div>


</div>


<!-- LEVEL 3 : SOLDIERS (no organization) -->
<div class="level-3-wrapper" style="justify-content:center; gap:40px; flex-wrap:wrap;">


<!-- Blitz -->
<div class="node-card rank-soldier" onclick="window.location.href='db/agent-blitz.html'">
<div class="node-role">ASSAULT</div>
<div class="node-name">BLITZ</div>
<div class="node-status"><span>READY</span> <span style="color:var(--danger)">●</span></div>
</div>


<!-- Blake -->
<div class="node-card rank-soldier" onclick="window.location.href='db/agent-blake.html'">
<div class="node-role">INFANTRY</div>
<div class="node-name">BLAKE</div>
<div class="node-status"><span>DEPLOYED</span> <span style="color:var(--danger)">●</span></div>
</div>


<!-- Roxanne -->
<div class="node-card rank-soldier" onclick="window.location.href='db/agent-roxanne.html'">
<div class="node-role">PROTECTION</div>
<div class="node-name">ROXANNE</div>
<div class="node-status"><span>GUARD</span> <span style="color:var(--warning)">●</span></div>
</div>


<!-- Adam -->
<div class="node-card rank-soldier" onclick="window.location.href='db/agent-adam.html'">
<div class="node-role">ASSET</div>
<div class="node-name">ADAM</div>
<div class="node-status"><span>PENDING</span> <span style="#666">●</span></div>
</div>


<!-- Dust -->
<div class="node-card rank-soldier" onclick="window.location.href='db/agent-wei.html'">
<div class="node-role">RECON</div>
<div class="node-name">DUST</div>
<div class="node-status"><span>OBSERVER</span> <span style="color:var(--secondary)">●</span></div>
</div>


<!-- Nyx -->
<div class="node-card rank-soldier" onclick="window.location.href='db/agent-nyx.html'">
<div class="node-role">CYBER</div>
<div class="node-name">NYX</div>
<div class="node-status"><span>NETRUNNER</span> <span style="color:var(--primary)">●</span></div>
</div>


<!-- Selena (now Soldier) -->
<div class="node-card rank-soldier" onclick="window.location.href='db/agent-selena.html'">
<div class="node-role">LEGAL</div>
<div class="node-name">SELENA</div>
<div class="node-status"><span>ACTIVE</span> <span style="color:var(--warning)">●</span></div>
</div>


</div>


</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sessionRaw = localStorage.getItem('sas_session');
            if (sessionRaw) {
                try {
                    const currentUser = JSON.parse(sessionRaw);
                    document.getElementById('hud-username').textContent = currentUser.username;
                    document.getElementById('hud-rank').textContent = currentUser.rank;
                    document.getElementById('user-hud').style.display = 'flex';
                } catch(e) {}
            }
        });
    </script>
</body>
</html>